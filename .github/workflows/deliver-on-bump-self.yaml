name: deliver on bump self

on:
  workflow_run:
    workflows:
      - bump self
    types:
      - completed
  workflow_dispatch:

jobs:
  android:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: ./.github/workflows/deliver.android.yaml
    secrets: inherit

  ios:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: ./.github/workflows/deliver.ios.yaml
    secrets: inherit

  tag:
    needs: [ios, android]
    uses: ./.github/workflows/tag.yaml
    secrets: inherit
